<!-- ./client/index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <button onClick="addPin()">Add Pin</button>
      <button onClick="clearElement('add-pin')">Clear</button>

      <div style="display: grid; width: 20px">
        <input type="text" class="add-pin" name="label" placeholder="label" />
        <input type="text" class="add-pin" name="userId" placeholder="userId" />
        <input
          type="text"
          class="add-pin"
          name="showOnMap"
          placeholder="showOnMap"
        />
        <input
          type="text"
          class="add-pin"
          name="imageUrl"
          placeholder="imageUrl"
        />
        <input type="number" class="add-pin" name="lat" placeholder="lat" />
        <input type="number" class="add-pin" name="lng" placeholder="lng" />
      </div>
      <p id="add-pin"></p>
    </div>

    <div>
      <button onClick="getPins()">Get Pins</button>
      <button onClick="clearElement('get-pins')">Clear</button>
      <p
        id="get-pins"
        style="height: 300px; width: 400px; overflow: scroll;"
      ></p>
    </div>

    <div>
      <button onClick="updatePin()">Update Pin</button>
      <div style="display: grid; width: 20px;">
        <input type="text" class="update-pin" name="id" placeholder="id" />
        <input
          type="text"
          class="update-pin"
          name="label"
          placeholder="label"
        />
        <input
          type="text"
          class="update-pin"
          name="userId"
          placeholder="userId"
        />
        <input
          type="text"
          class="update-pin"
          name="showOnMap"
          placeholder="showOnMap"
        />
        <input
          type="text"
          class="update-pin"
          name="imageUrl"
          placeholder="imageUrl"
        />
        <input type="number" class="update-pin" name="lat" placeholder="lat" />
        <input type="number" class="update-pin" name="lng" placeholder="lng" />
      </div>
      <p id="update-pin"></p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script>
    <script>
      const socket = io('http://localhost:3000');

      socket.on('addPin', data => {
        document.getElementById('add-pin').innerText = data;
      });

      socket.on('getPins', data => {
        document.getElementById('get-pins').innerText = data;
      });

      socket.on('updatePin', data => {
        document.getElementById('update-pin').innerText = data;
      });

      function clearElement(key) {
        document.getElementById(key).innerText = '';
      }

      function getPins() {
        socket.emit('getPins');
      }

      function updatePin() {
        const elements = document.querySelectorAll('input.update-pin');

        const input = {
          id: elements[0].value,
          label: elements[1].value,
          userId: elements[2].value,
          showOnMap: elements[3].value,
          imageUrl: elements[4].value,
          lat: elements[5].value,
          lng: elements[6].value
        };

        socket.emit('updatePin', input);
      }

      function addPin() {
        const elements = document.querySelectorAll('input.add-pin');

        const input = {
          label: elements[0].value,
          userId: elements[1].value,
          showOnMap: elements[2].value,
          imageUrl: elements[3].value,
          lat: elements[4].value,
          lng: elements[5].value
        };

        socket.emit('addPin', input);
      }
    </script>
  </body>
</html>
