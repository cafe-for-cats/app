<ion-grid fixed="true">
  <div class="container">
    <div>
      <ion-row>
        <ion-col size="12">
          <h2>Create Protest</h2>
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <ion-item class="app-input-body-1 ion-no-padding">
              <ion-label position="floating">Title</ion-label>
              <ion-input
                required
                formControlName="title"
                name="title"
              ></ion-input>
            </ion-item>
            <ion-item class="app-input-body-1 ion-no-padding">
              <ion-label position="floating">Description</ion-label>
              <ion-input
                required
                formControlName="description"
                name="description"
              ></ion-input>
            </ion-item>
            <ion-item class="app-input-body1 ion-no-padding">
              <ion-label position="floating">Start Date</ion-label>
              <ion-datetime
                required
                displayFormat="D MMM YYYY H:mm"
                formControlName="startDate"
                name="startDate"
                min="{{ minDate }}"
                max="2030"
              ></ion-datetime>
            </ion-item>
            <ion-col>
              <div
                *ngIf="title.invalid && (title.dirty || title.touched)"
                class="alert alert-danger"
              >
                <div *ngIf="title.errors.required" class="alert-text">
                  - Title is required.
                </div>
              </div>
              <div
                *ngIf="
                  description.invalid &&
                  (description.dirty || description.touched)
                "
                class="alert alert-danger"
              >
                <div *ngIf="description.errors.required" class="alert-text">
                  - A description is required.
                </div>
              </div>
              <div
                *ngIf="
                  startDate.invalid && (startDate.dirty || startDate.touched)
                "
                class="alert alert-danger"
              >
                <div *ngIf="startDate.errors.required" class="alert-text">
                  - A start date is required.
                </div>
              </div>
            </ion-col>
            <ion-row class="row-items-end">
              <ion-button
                color="app-light-green"
                class="submit-button"
                expand="block"
                type="submit"
              >
                Submit
              </ion-button>
              <ion-button
                color="app-light-green"
                class="submit-button"
                expand="block"
                type="reset"
              >
                Clear
              </ion-button>
            </ion-row>
          </form>
        </ion-col>
        <ion-col size="12">
          <h2>Join Protest</h2>
          <form [formGroup]="form" (ngSubmit)="onSubmit(form)">
            <p class="alert-text">//Commented out due to errors ðŸ™€â˜•</p>
            <!-- <ion-item class="app-input-body-1 ion-no-padding">
              <ion-label position="floating">Protest Code</ion-label>
              <ion-input
                formControlName="protestCode"
                name="protestCode"
                required="true"
              ></ion-input>
            </ion-item>
            <div
              *ngIf="
                protestCode.invalid &&
                (protestCode.dirty || protestCode.touched)
              "
              class="alert alert-danger"
            >
              <div *ngIf="protestCode.errors.required">
                Protest code is required.
              </div>
            </div> -->
            <ion-row class="row-items-end">
              <ion-button
                color="app-light-green"
                class="submit-button"
                expand="block"
                type="submit"
              >
                Submit
              </ion-button>
              <ion-button
                color="app-light-green"
                class="submit-button"
                expand="block"
                type="reset"
              >
                Clear
              </ion-button>
            </ion-row>
          </form>
        </ion-col>
      </ion-row>
    </div>

    <hr />

    <div>
      <h2>Protests Joined:</h2>
      <div *ngIf="data$ | async as data; else elseBlock">
        <h2>Created</h2>
        <table table class="protests__table">
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
          </tr>
          <tr *ngFor="let protest of data.protestsCreated">
            <!-- <td (click)="navigateToProtestOverview(protest)">
              {{ protest.title }}
            </td>-->
            <td>{{ protest.description }}</td>
            <td>{{ protest.startDate }}</td>
          </tr>
        </table>

        <h2>Joined</h2>
        <table class="protests__table">
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
          </tr>
          <tr *ngFor="let protest of data.protestsJoined">
            <td (click)="navigateToProtestOverview(protest)">
              {{ protest.title }}
            </td>
            <td>{{ protest.description }}</td>
            <td>{{ protest.startDate }}</td>
          </tr>
        </table>
      </div>
      <ng-template #elseBlock
        ><p class="alert-text">
          - You currently have not created or joined a protest. <br />
          - Or data is not being rendered ðŸ˜¿ðŸ˜¿ðŸ˜¿
        </p>
        <!--<ion-button (click)="logThis(data$)"></ion-button>-->
      </ng-template>
    </div>
  </div>

  <!-- add httpinterceptor for checking authentication state -->
</ion-grid>
